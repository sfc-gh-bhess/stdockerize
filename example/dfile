FROM python:3.9-slim

EXPOSE 80

WORKDIR /app

COPY . .

RUN apt-get update && apt-get install -y --no-install-recommends gcc python3-dev g++

RUN pip3 install -r requirements.txt

RUN  --mount=type=secret,id=secrets,dst=/tmp/secrets.json.in cp /tmp/secrets.json.in /tmp/secrets.json

ENTRYPOINT [ "python3", "-m", "streamlit", "run", "example.py", "--server.port=80", "--server.address=0.0.0.0" ]
